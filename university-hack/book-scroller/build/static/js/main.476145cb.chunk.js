(this["webpackJsonpbook-scroller"]=this["webpackJsonpbook-scroller"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/like.ea03542f.svg"},function(e,t,a){e.exports=a.p+"static/media/dislike.81d883b3.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/cross.e49095af.svg"},function(e,t,a){e.exports=a.p+"static/media/like.ea03542f.svg"},function(e,t,a){e.exports=a.p+"static/media/dislike.81d883b3.svg"},function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(11),c=a.n(i),r=a(7),s=a(12),l=a(1),u=a(2),d=a(3),m=a(5),p=a(4),g=a(6),h=(a(21),a(22),a(8)),v=a.n(h),f=a(9),b=a.n(f),k=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t},E=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[t];try{var n=t.parentNode;return n?e(t.parentNode,[].concat(Object(l.a)(a),[n])):a}catch(o){return[]}};function O(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.data,o=void 0!==n&&n,i=a.method,c=void 0===i?"GET":i,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);e(t)}};var s=window.location,l=s.protocol,u=s.host,d=s.hostname;"http:"===l?r.open(c,"".concat(l,"//").concat(d,":8000/api/").concat(t,"/"),!0):r.open(c,"".concat(l,"//").concat(u,"/api/").concat(t,"/"),!0),o?(r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-CSRFToken",k("csrftoken")),r.send(JSON.stringify(o))):r.send()}var j=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,a=e.onClick,n=e.categorize,i=t.id,c=t.name,r=t.image_link,s=t.category;return o.a.createElement("div",{onClick:function(e){Array.from(document.getElementsByClassName("book")).forEach((function(e){e.classList.remove("active")})),E(e.target)[1].classList.toggle("active")},className:"book".concat(""!==s?" categorized ".concat(s):"")},o.a.createElement("img",{className:"cover",src:r,alt:"book"}),"interested"===s&&o.a.createElement("div",{className:"categorized liked"},o.a.createElement("img",{src:v.a,alt:"interested in"})),"not_interested"===s&&o.a.createElement("div",{className:"categorized disliked"},o.a.createElement("img",{src:b.a,alt:"not interested in"})),o.a.createElement("div",{className:"options"},o.a.createElement("button",{onClick:function(){n(i,"interested")},className:"like"},o.a.createElement("div",{className:"img-box".concat("interested"===s?" active":"")},o.a.createElement("img",{src:v.a,alt:"interested in"}))),o.a.createElement("button",{onClick:function(){a(t)},className:"info"},o.a.createElement("div",{className:"info-box"},o.a.createElement("div",{className:"name"},c.split(" ").slice(0,3).join(" "),c.split(" ").length>3?"...":""))),o.a.createElement("button",{onClick:function(){n(i,"not_interested")},className:"dislike"},o.a.createElement("div",{className:"img-box".concat("not_interested"===s?" active":"")},o.a.createElement("img",{src:b.a,alt:"not interested in"})))))}}]),t}(o.a.Component),y=(a(23),a(13)),N=a.n(y),w=a(14),C=a.n(w),B=a(15),z=a.n(B),S=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.popupForm,a=e.toggle,n=e.id,i=e.name,c=e.author,r=e.description,s=e.labels,l=e.category,u=e.categorize;return o.a.createElement("div",{className:"info-popup"},o.a.createElement("div",{ref:t,className:"form"},o.a.createElement("span",{onClick:a,className:"close"},o.a.createElement("img",{src:N.a,alt:"close"})),o.a.createElement("div",{className:"name"},i),o.a.createElement("div",{className:"author"},c),o.a.createElement("div",{className:"labels"},s.split(";").slice(0,s.split(";").length-1).map((function(e,t){return o.a.createElement("div",{key:t,className:"label"},e)}))),o.a.createElement("div",{className:"description"},r),o.a.createElement("div",{className:"buttons"},o.a.createElement("img",{onClick:function(){u(n,"interested")},className:"like".concat("interested"===l?" active":""),src:C.a,alt:"interested in"}),o.a.createElement("img",{onClick:function(){u(n,"not_interested")},className:"dislike".concat("not_interested"===l?" active":""),src:z.a,alt:"not interested in"}))))}}]),t}(o.a.Component),x=(a(24),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={background:this.props.color};return o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"anim-box"},Object(l.a)(Array(3).keys()).map((function(t,a){return o.a.createElement("div",{key:a,style:e,className:"circle"})}))))}}]),t}(o.a.Component)),_=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(m.a)(this,Object(p.a)(t).call(this,e));var n=4,i=e.screenWidth;return i<=1280&&(n=3),i<=960&&(n=2),i<=640&&(n=1),a.state={popup:!1,columnsNumber:n},a.popupForm=o.a.createRef(),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=4,o=e.screenWidth;o<=1280&&(n=3),o<=960&&(n=2),o<=640&&(n=1),n!==t.columnsNumber&&this.setState({columnsNumber:n})}},{key:"componentDidMount",value:function(){var e=this;window.onmousedown=function(t){!E(t.target).includes(e.popupForm.current)&&e.state.popup&&e.togglePopup()}}},{key:"togglePopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({popup:!this.state.popup&&e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.columnsNumber,n=t.popup,i={4:256,3:245,2:224,1:0},c=this.props,r=c.allBooks,s=c.categorize,u=c.loading,d=Object(l.a)(Array(a).keys()).map((function(){return{overallHeight:0,books:[]}}));return r.forEach((function(e){var t=e.image_height,n=e.image_width;t=Math.ceil(t*i[a]/n);var o=Math.min.apply(Math,Object(l.a)(d.map((function(e){return e.overallHeight})))),c=d.find((function(e){return e.overallHeight===o}));c.books.push(e),c.overallHeight+=t})),o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(S,Object.assign({popupForm:this.popupForm,categorize:s},n,{toggle:this.togglePopup.bind(this)})),o.a.createElement("div",{className:"grid".concat(n?" blurred":"")},d.map((function(t,a){var n=t.books;return o.a.createElement("div",{key:a,className:"col"},n.map((function(t,a){return o.a.createElement(j,{key:a,categorize:s,book:t,onClick:e.togglePopup.bind(e)})})))}))),u&&o.a.createElement(x,null))}}]),t}(o.a.Component),H=(a(25),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={loading:!0,screenWidth:window.innerWidth,allBooks:[],categorizedBooks:{}},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){e.setState({screenWidth:window.innerWidth})},window.onscroll=function(){var t=e.state.loading;window.innerHeight+window.pageYOffset>=document.body.offsetHeight-2&&!t&&e.loadBooks()},O((function(t){var a=t.books;e.setState({allBooks:[].concat(Object(l.a)(e.state.allBooks),Object(l.a)(a)),loading:!1})}),"load_books",{data:{books:{}},method:"POST"})}},{key:"categorize",value:function(e,t){var a=this.state,n=a.allBooks,o=a.categorizedBooks,i=n.find((function(t){return t.id===e})),c=i.category===t?"":t;i.category=c,this.setState({allBooks:n,categorizedBooks:Object(s.a)({},o,Object(r.a)({},e,c))})}},{key:"loadBooks",value:function(){var e=this,t=this.state,a=t.categorizedBooks,n=t.allBooks;this.setState({loading:!0}),O((function(t){var a=t.books;e.setState({allBooks:[].concat(Object(l.a)(n),Object(l.a)(a)),loading:!1})}),"load_books",{data:{books:a},method:"POST"})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(_,Object.assign({categorize:this.categorize.bind(this)},this.state)))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.476145cb.chunk.js.map